<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <meta charset="UTF-8">
    <title>H·ªì s∆° c√° nh√¢n</title>
    <link rel="stylesheet" th:href="@{/css/settings/profile.css}">
</head>
<body>
<section layout:fragment="content"
         th:with="fmt='dd/MM/yyyy HH:mm',
                  roles=${#authentication != null
                          ? #authentication.authorities.?[#strings.startsWith(#this.authority,'ROLE_')]
                          : T(java.util.Collections).emptyList()}">

    <div class="wrap">
        <div class="surface-header">
            <h1 class="surface-title">üë§ H·ªì s∆° c√° nh√¢n</h1>
        </div>

        <!-- Th√¥ng b√°o -->
        <div th:if="${saved}" class="alert success">ƒê√£ l∆∞u thay ƒë·ªïi!</div>
        <div th:if="${error}" class="alert danger" th:text="${error}"></div>

        <!-- Th√¥ng tin t√†i kho·∫£n -->
        <div class="white-surface">
            <div class="meta-grid">
                <dl class="meta">
                    <div><dt>T√†i kho·∫£n</dt><dd th:text="${user.username}">admin</dd></div>
                    <div><dt>Tr·∫°ng th√°i</dt><dd><span class="dot on"></span>Active</dd></div>
                    <div><dt>T·∫°o l√∫c</dt><dd th:text="${#temporals.format(user.createdAt, fmt)}">27/10/2025 19:16</dd></div>
                </dl>

                <div class="roles">
                    <div class="section-subtitle">Vai tr√≤</div>
                    <div class="badge-list">
                        <span class="badge" th:each="ga : ${roles}" th:text="${ga.authority}">ROLE_ADMIN</span>
                        <span class="badge empty" th:if="${#lists.isEmpty(roles)}">(Kh√¥ng c√≥ vai tr√≤)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form c·∫≠p nh·∫≠t -->
        <div class="white-surface">
            <form th:action="@{/settings/profile}" th:object="${form}" method="post" class="profile-form" novalidate>
                <div class="form-grid">
                    <div class="field">
                        <label for="fullName">H·ªç v√† t√™n</label>
                        <input id="fullName" type="text" th:field="*{fullName}" placeholder="Your name"
                               required minlength="2" maxlength="120" autocomplete="name">
                    </div>
                    <div class="field">
                        <label for="email">Email</label>
                        <input id="email" type="email" th:field="*{email}" placeholder="you@example.com"
                               maxlength="120" autocomplete="email" inputmode="email">
                    </div>
                    <div class="field">
                        <label for="phone">SƒêT</label>
                        <input id="phone" type="text" th:field="*{phone}" placeholder="0xxxxxxxxx"
                               pattern="^0\\d{9}$" maxlength="10" inputmode="tel" autocomplete="tel-national"
                               title="S·ªë ƒëi·ªán tho·∫°i g·ªìm 10 ch·ªØ s·ªë, b·∫Øt ƒë·∫ßu b·∫±ng 0">
                    </div>
                </div>

                <!-- N√∫t cƒÉn ph·∫£i -->
                <div class="form-actions">
                    <button type="submit" class="btn primary" data-loading-text="ƒêang l∆∞u...">L∆∞u thay ƒë·ªïi</button>
                </div>
            </form>
        </div>
    </div>
</section>

<script th:src="@{/js/settings/profile.js}"></script>
</body>
</html>
