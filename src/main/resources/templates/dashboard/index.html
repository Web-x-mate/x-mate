<!doctype html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>B·∫£ng ƒëi·ªÅu khi·ªÉn</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <style>
        /*
        ====================================================
        1. BI·∫æN CSS V√Ä M√ÄU S·∫ÆC SEMANTIC (M√†u t∆∞∆°ng ph·∫£n cao)
        ====================================================
        */
        :root{
            /* M√†u n·ªÅn v√† ch·ªØ c∆° b·∫£n */
            --bg:#F8F9FA;      /* X√°m Nh·∫°t - N·ªÅn Dashboard */
            --surface:#FFFFFF; /* Tr·∫Øng Tinh - N·ªÅn Cards/Widgets */
            --text:#212529;    /* ƒêen ƒê·∫≠m - VƒÉn b·∫£n Ch√≠nh (High Contrast) */
            --muted:#6C757D;   /* X√°m ƒê·∫≠m - VƒÉn b·∫£n Ph·ª•, ƒë∆∞·ªùng l∆∞·ªõi */
            --bd:#DEE2E6;      /* X√°m S√°ng - Vi·ªÅn/ƒê∆∞·ªùng chia */
            --ring:#ADB5BD;    /* V√≤ng focus/shadow */

            /* M√†u Semantic (TƒÉng tr∆∞·ªüng/C·∫£nh b√°o) - T∆∞∆°ng ph·∫£n cao */
            --up-bg:rgba(40,167,69,.15); --up:#28A745; /* Xanh L√° C√¢y - Success/TƒÉng */
            --down-bg:rgba(220,53,69,.15); --down:#DC3545; /* ƒê·ªè R·ª±c - Danger/Gi·∫£m */
            --warn-bg:rgba(255,193,7,.15); --warn:#FFC107; /* V√†ng Cam - Warning/Ch·ªù */
            --info-bg:rgba(23,162,184,.15); --info:#17A2B8; /* Xanh Lam S√°ng - Info/Trung t√≠nh */

            /* M√†u Icon cho KPI */
            --ico-blue-bg:#e0f2fe; --ico-blue:#0369a1; /* Gi·ªØ l·∫°i m√†u blue cho icon */
            --ico-green-bg:#dcfce7; --ico-green:#166534;
            --ico-purple-bg:#ede9fe; --ico-purple:#5b21b6;
            --ico-orange-bg:#ffedd5; --ico-orange:#9a3412;
            --ico-gray-bg:#e5e7eb; --ico-gray:#334155;
        }

        /* Chart Colors (√Åp d·ª•ng B·∫£ng m√†u th·ªëng nh·∫•t) */
        .chart-colors {
            --chart-primary: #63a4ed;   /* Xanh D∆∞∆°ng ƒê·∫≠m */
            --chart-danger:#DC3545;    /* ƒê·ªè R·ª±c */
            --chart-success:#28A745;   /* Xanh L√° C√¢y */
            --chart-warning:#FFC107;   /* V√†ng Cam */
            --chart-info:#17A2B8;      /* Xanh Lam S√°ng */
            --chart-vip:#6F42C1;       /* T√≠m ƒê·∫≠m */
            --chart-secondary:#FD7E14; /* Cam ƒê·∫≠m (Ph·ª• tr·ª£) */
            --chart-pink:#E83E8C;      /* H·ªìng ƒê·∫≠m (Ph·ª• tr·ª£) */
        }

        body{background:var(--bg); color:var(--text)}
        .wrap{max-width:1360px;margin:0 auto}
        .card{background:var(--surface);border:1px solid var(--bd);border-radius:1rem;box-shadow:0 1px 3px rgba(33,37,41,.1)} /* TƒÉng ƒë·ªô ƒë·∫≠m shadow nh·∫π */
        .muted{color:var(--muted)}
        .btn{padding:.45rem .7rem;border-radius:.55rem;border:1px solid var(--bd);font-size:.875rem;background:var(--surface);color:var(--text)}
        .btn:hover{filter:brightness(0.97)}
        input[type="date"], select{background:var(--surface);color:var(--text);border:1px solid var(--bd);outline:none}
        input[type="date"]:focus, select:focus{box-shadow:0 0 0 3px var(--ring)}

        /* Filter g·ªçn */
        .filter-grid{
            display:grid; grid-template-columns:minmax(520px,1fr) auto auto;
            align-items:center; column-gap:.5rem; row-gap:.35rem;
        }
        .field-inline{display:flex;align-items:center;gap:.4rem}
        .field-wrap{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}
        .filter-presets{grid-column:1/2;display:flex;justify-content:center;gap:.5rem;flex-wrap:wrap;margin-top:.2rem}
        .ctl{font-size:.92rem;padding:.45rem .6rem;border-radius:.5rem}
        .ctl-select{font-size:.92rem;padding:.45rem 2rem .45rem .6rem;border-radius:.5rem}

        /* KPI */
        .kpi{display:flex;gap:.75rem;align-items:center;padding:.85rem;background:var(--surface);border:1px solid var(--bd);border-radius:1rem;min-height:84px}
        .ico{flex:0 0 42px;height:42px;display:grid;place-items:center;border-radius:.85rem}
        .ico.blue{background:var(--ico-blue-bg);color:var(--ico-blue)}
        .ico.green{background:var(--ico-green-bg);color:var(--ico-green)}
        .ico.purple{background:var(--ico-purple-bg);color:var(--ico-purple)}
        .ico.orange{background:var(--ico-orange-bg);color:var(--ico-orange)}
        .ico.gray{background:var(--ico-gray-bg);color:var(--ico-gray)}
        .kmain{min-width:0;flex:1}
        .kval{font-size:1.45rem;line-height:1;font-weight:800;font-variant-numeric:tabular-nums}
        .kcap{font-size:.84rem;color:var(--muted);margin-top:.2rem;white-space:nowrap}
        .kright{margin-left:.4rem;display:flex;align-items:center}
        /* Tinh ch·ªânh chip - ƒë·ªô t∆∞∆°ng ph·∫£n cao */
        .chip{display:inline-flex;align-items:center;gap:.3rem;padding:.18rem .55rem;border-radius:999px;font-weight:700;font-size:.74rem;white-space:nowrap; border:1px solid}
        .chip.up{background:var(--up-bg);color:var(--up); border-color:var(--up)}
        .chip.down{background:var(--down-bg);color:var(--down); border-color:var(--down)}
        .chip.warn{background:var(--warn-bg);color:var(--warn); border-color:var(--warn)}

        canvas.small-pie{max-height:200px!important}
    </style>
</head>

<body class="chart-colors">
<section layout:fragment="content">
    <div class="wrap p-3 md:p-5 space-y-4">

        <div class="card p-3 md:p-4">
            <h1 class="text-2xl md:text-3xl font-bold mb-2">B·∫£ng ƒëi·ªÅu khi·ªÉn</h1>

            <div class="filter-grid">
                <div class="field-wrap">
                    <div class="field-inline">
                        <span class="text-base">T·ª´</span>
                        <input id="from" type="date" class="ctl"/>
                        <span class="muted">üìÖ</span>
                    </div>
                    <span class="muted">‚Üí</span>
                    <div class="field-inline">
                        <span class="text-base">ƒê·∫øn</span>
                        <input id="to" type="date" class="ctl"/>
                        <span class="muted">üìÖ</span>
                    </div>

                    <div class="filter-presets">
                        <button type="button" data-preset="today"  class="btn">H√¥m nay</button>
                        <button type="button" data-preset="7d"     class="btn">7 ng√†y</button>
                        <button type="button" data-preset="30d"    class="btn">30 ng√†y</button>
                        <button type="button" data-preset="12m"    class="btn">12 th√°ng</button>
                    </div>
                </div>

                <select id="gran" class="ctl-select">
                    <option value="D">Theo ng√†y</option>
                    <option value="W">Theo tu·∫ßn</option>
                    <option value="M">Theo th√°ng</option>
                </select>

                <button id="apply" type="button" class="px-4 py-2 rounded-lg text-sm font-medium"
                        style="background:var(--chart-primary);color:white">√Åp d·ª•ng</button> </div>
        </div>

        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-5 gap-3">
            <div class="kpi">
                <div class="ico blue"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M6 4a2 2 0 0 0-2 2v12.5A1.5 1.5 0 0 0 5.5 20H20v-2H6.5a.5.5 0 1 1 0-1H20V6a2 2 0 0 0-2-2H6z"/></svg></div>
                <div class="kmain"><div class="kval" id="k_articles">0</div><div class="kcap truncate">T·ªïng b√†i vi·∫øt</div></div>
                <div class="kright"><span id="t_articles" class="chip up">+0%</span></div>
            </div>
            <div class="kpi">
                <div class="ico green"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M4 19h16v2H2V3h2v16zm3-6 3-3 3 2 4-5 3 3-1.4 1.4-1.6-1.6-4 5-3-2-3 3L7 13z"/></svg></div>
                <div class="kmain"><div class="kval" id="k_views">0</div><div class="kcap truncate">L∆∞·ª£t xem trang</div></div>
                <div class="kright"><span id="t_views" class="chip up">+0%</span></div>
            </div>
            <div class="kpi">
                <div class="ico purple"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M4 4h16v10H6l-2 2V4zm2 4h12v2H6V8z"/></svg></div>
                <div class="kmain"><div class="kval" id="k_comments">0</div><div class="kcap truncate">B√¨nh lu·∫≠n</div></div>
                <div class="kright"><span id="t_comments" class="chip up">+0%</span></div>
            </div>
            <div class="kpi">
                <div class="ico orange"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M16 11a4 4 0 1 0-8 0 4 4 0 0 0 8 0zm-9 7a6 6 0 1 1 12 0v2H7v-2z"/></svg></div>
                <div class="kmain"><div class="kval" id="k_authors">0</div><div class="kcap truncate">T√°c gi·∫£</div></div>
                <div class="kright"><span id="t_authors" class="chip down">-0%</span></div>
            </div>
            <div class="kpi">
                <div class="ico gray"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M21 5H3v14h18V5zm-2 2v7l-4-4-3 3-2-2-5 5V7h14z"/></svg></div>
                <div class="kmain"><div class="kval" id="k_media">0</div><div class="kcap truncate">T·ªáp media</div></div>
                <div class="kright"><span id="t_media" class="chip up">+0%</span></div>
            </div>
        </section>

        <section class="grid grid-cols-1 xl:grid-cols-2 gap-5">
            <div class="card p-4">
                <div class="flex items-center justify-between mb-2">
                    <h3 class="font-semibold">Hi·ªáu su·∫•t n·ªôi dung</h3>
                    <span class="px-2 py-1 rounded-full text-xs" style="background:var(--info-bg);color:var(--chart-info)">Theo b·ªô l·ªçc</span> </div>
                <canvas id="c_perf"></canvas>
            </div>
            <div class="card p-4">
                <div class="flex items-center justify-between mb-2">
                    <h3 class="font-semibold">N·ªôi dung theo danh m·ª•c</h3>
                    <span class="px-2 py-1 rounded-full text-xs" style="background:var(--info-bg);color:var(--chart-info)">NƒÉm nay</span> </div>
                <canvas id="c_cat"></canvas>
            </div>
        </section>

        <section class="grid grid-cols-1 xl:grid-cols-2 gap-5">
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">L·ªãch s·ª≠ h·ªá th·ªëng</h3><a href="#" class="muted hover:underline text-sm">Xem t·∫•t c·∫£</a></div><canvas id="c_sys" class="small-pie"></canvas></div>
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Ho·∫°t ƒë·ªông ng∆∞·ªùi d√πng</h3><a href="#" class="muted hover:underline text-sm">Xem t·∫•t c·∫£</a></div><canvas id="c_user"></canvas></div>
        </section>

        <section class="grid grid-cols-1 xl:grid-cols-3 gap-5">
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">·∫¢nh ch·ª•p Catalog</h3><span class="muted text-xs">ng√†nh h√†ng / s·∫£n ph·∫©m / bi·∫øn th·ªÉ / media</span></div><canvas id="c_catalog"></canvas></div>
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">RBAC: Vai tr√≤ √ó Quy·ªÅn</h3><span class="muted text-xs">roles / permissions</span></div><canvas id="c_rbac"></canvas></div>
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Nh·∫≠t k√Ω (24h)</h3><span class="muted text-xs">CREATE / UPDATE / DELETE / STATUS</span></div><canvas id="c_logs" class="small-pie"></canvas></div>
        </section>

        <section class="grid grid-cols-1 xl:grid-cols-2 gap-5">
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">T·ªìn kho: c√≥ s·∫µn vs gi·ªØ ch·ªó</h3><span class="muted text-xs">SKU</span></div><canvas id="c_stock"></canvas></div>
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">ƒê∆°n mua theo tr·∫°ng th√°i</h3><span class="muted text-xs">PO</span></div><canvas id="c_po" class="small-pie"></canvas></div>
        </section>

        <section class="grid grid-cols-1 xl:grid-cols-3 gap-5">
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Ph√¢n b·ªë ph√¢n kh√∫c KH</h3><span class="muted text-xs">segments</span></div><canvas id="c_seg" class="small-pie"></canvas></div>
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">ƒêi·ªÉm t√≠ch l≈©y theo h·∫°ng</h3><span class="muted text-xs">loyalty</span></div><canvas id="c_loy"></canvas></div>
            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Hi·ªáu qu·∫£ khuy·∫øn m√£i</h3><span class="muted text-xs">discounts + usages</span></div><canvas id="c_disc"></canvas></div>
        </section>

        <section class="grid grid-cols-1 xl:grid-cols-3 gap-5">
            <div class="card overflow-hidden">
                <div class="p-4 border-b" style="border-color:var(--bd)"><div class="flex items-center justify-between"><h3 class="font-semibold">ƒê∆°n g·∫ßn nh·∫•t</h3><a href="#" class="muted hover:underline text-sm">Xem t·∫•t c·∫£</a></div></div>
                <div class="p-4 overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="text-left muted"><tr><th class="py-2">M√£</th><th class="py-2">Kh√°ch</th><th class="py-2">T·ªïng</th><th class="py-2">TT</th><th class="py-2">Giao</th><th class="py-2">Ng√†y</th></tr></thead>
                        <tbody id="t_orders"></tbody>
                    </table>
                </div>
            </div>
            <div class="card overflow-hidden">
                <div class="p-4 border-b" style="border-color:var(--bd)"><div class="flex items-center justify-between"><h3 class="font-semibold">SKU t·ªìn th·∫•p</h3><a href="#" class="muted hover:underline text-sm">T·ªõi kho</a></div></div>
                <div class="p-4 overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="text-left muted"><tr><th class="py-2">SKU</th><th class="py-2">T√™n</th><th class="py-2">C√≥ s·∫µn</th><th class="py-2">Gi·ªØ ch·ªó</th></tr></thead>
                        <tbody id="t_low"></tbody>
                    </table>
                </div>
            </div>
            <div class="card overflow-hidden">
                <div class="p-4 border-b" style="border-color:var(--bd)"><div class="flex items-center justify-between"><h3 class="font-semibold">PO ƒëang nh·∫≠n</h3><a href="#" class="muted hover:underline text-sm">T·ªõi mua h√†ng</a></div></div>
                <div class="p-4 overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="text-left muted"><tr><th class="py-2">PO</th><th class="py-2">Nh√† cung c·∫•p</th><th class="py-2">Tr·∫°ng th√°i</th><th class="py-2">ƒê√£ nh·∫≠n/T·ªïng</th></tr></thead>
                        <tbody id="t_po"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <script>
        const $ = id => document.getElementById(id);
        const money = v => new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(+v||0);
        const cssVar = n => getComputedStyle(document.body).getPropertyValue(n).trim();

        // Chart defaults cho n·ªÅn s√°ng
        // ƒê·∫£m b·∫£o m√†u ch·ªØ v√† ƒë∆∞·ªùng vi·ªÅn c·ªßa Chart.js d√πng c√°c bi·∫øn m·ªõi
        Chart.defaults.color = cssVar('--muted');
        Chart.defaults.borderColor = cssVar('--bd');

        // L·∫•y c√°c m√†u ch√≠nh ƒë√£ ƒë·ªãnh nghƒ©a trong CSS
        const chartColors = {
            primary: cssVar('--chart-primary'),
            danger: cssVar('--chart-danger'),
            success: cssVar('--chart-success'),
            warning: cssVar('--chart-warning'),
            info: cssVar('--chart-info'),
            vip: cssVar('--chart-vip'),
            secondary: cssVar('--chart-secondary'),
            pink: cssVar('--chart-pink')
        };
        const COLOR_PALETTE = [chartColors.primary, chartColors.danger, chartColors.success, chartColors.warning, chartColors.info, chartColors.vip, chartColors.secondary, chartColors.pink];


        // =========================================================================
        // PH·∫¶N SEED V√Ä LOGIC GI·ªÆ NGUY√äN (V√å KH√îNG C·∫¶N CH·ªàNH S·ª¨A D·ªÆ LI·ªÜU)
        // =========================================================================
        function genDailySeed(startISO, months=18){
            const out = [];
            const start = new Date(startISO);
            const end = new Date(start);
            end.setMonth(end.getMonth()+months);
            for(let d=new Date(start); d<end; d.setDate(d.getDate()+1)){
                const m = d.getMonth(); // 0..11
                const season = (m===10||m===11)?1.25:(m===5||m===6)?0.9:1; // Q4 cao, h√® nh·∫π
                const a = Math.max(6, Math.round(10*season + 4*Math.sin(d.getTime()/8.64e7/14) + rand(-2,2)));
                const v = Math.max(600, Math.round(1200*season + 250*Math.sin(d.getTime()/8.64e7/10) + rand(-120,120))); // views per day
                const c = Math.max(2, Math.round(a*0.35 + rand(-1,1)));
                out.push({date: toISO(d), articles:a, views:v, comments:c});
            }
            return out;
        }
        const rand = (min,max)=>Math.random()*(max-min)+min;
        const toISO = d => new Date(d.getTime()-d.getTimezoneOffset()*60000).toISOString().slice(0,10);

        // seed t·ª´ 2024-01-01
        const TS = genDailySeed('2024-01-01', 18);

        // ===== STATIC SEED cho c√°c ph·∫ßn kh√°c (nh∆∞ b·∫°n ƒëang c√≥) =====
        const DASHBOARD = {
            // S·∫Øp x·∫øp l·∫°i ƒë·ªÉ m√†u s·∫Øc t∆∞∆°ng ·ª©ng v·ªõi m·ª©c ƒë·ªô quan tr·ªçng: Primary (xanh d∆∞∆°ng) -> Secondary (ƒë·ªè, cam, v.v)
            category:{ labels:["C√¥ng ngh·ªá","Kinh doanh","S·ª©c kh·ªèe","Th·ªÉ thao","Gi·∫£i tr√≠","Ch√≠nh tr·ªã","Khoa h·ªçc"], values:[158,145,98,88,76,70,60] },
            system:{ labels:["T·∫°o","S·ª≠a","X√≥a","Tr·∫°ng th√°i"], values:[35,42,7,16] },
            userActivity:{ labels:["ƒêƒÉng nh·∫≠p","S·ª≠a","Xu·∫•t b·∫£n","B√¨nh lu·∫≠n","Th√≠ch"], values:[120,80,45,200,300] },
            catalog:{ labels:["Ng√†nh h√†ng","S·∫£n ph·∫©m","Bi·∫øn th·ªÉ","Media"], values:[12,154,423,786] },
            rbac:{ labels:["Admin","Bi√™n t·∫≠p","T√°c gi·∫£","Xem"], values:[12,34,24,58] },
            activity:{ labels:["T·∫°o","S·ª≠a","X√≥a","Tr·∫°ng th√°i"], values:[80,140,20,35] },
            stock:{ labels:["SKU-A","SKU-B","SKU-C","SKU-D","SKU-E","SKU-F"], onHand:[120,80,95,60,150,70], reserved:[20,10,15,5,30,12] },
            // S·∫Øp x·∫øp l·∫°i tr·∫°ng th√°i PO ƒë·ªÉ kh·ªõp v·ªõi m√†u Semantic: Warning, Info, Success, Danger, VIP
            poStatus:{ labels:["Nh√°p","Ch·ªù","ƒêang nh·∫≠n","ƒê√£ h·∫°ch to√°n","H·ªßy"], values:[4,8,6,3,1] },
            // S·∫Øp x·∫øp l·∫°i Segment KH ƒë·ªÉ kh·ªõp v·ªõi m√†u Semantic: Info, Success, VIP, Muted
            segments:{ labels:["M·ªõi","Quay l·∫°i","VIP","Ng·ªß ƒë√¥ng"], values:[320,510,85,120] },
            loyalty:{ labels:["ƒê·ªìng","B·∫°c","V√†ng","B·∫°ch kim"], values:[1200,430,140,35] },
            discountEffect:{ labels:["SPRING10","FREESHIP","BLACKFRI","MEMBER5"], orders:[120,240,85,160], revenue:[24000000,36500000,17800000,22200000] },
            recentOrders:[
                {code:"#10021",customer:"Nguy·ªÖn A",total:1250000,paymentStatus:"PAID",shippingStatus:"SHIPPED",createdAt:"2025-10-21 09:14"},
                {code:"#10022",customer:"Tr·∫ßn B",total:850000,paymentStatus:"PAID",shippingStatus:"PENDING",createdAt:"2025-10-21 10:05"},
                {code:"#10023",customer:"L√™ C",total:2190000,paymentStatus:"PENDING",shippingStatus:"-",createdAt:"2025-10-21 11:44"},
                {code:"#10024",customer:"Ph·∫°m D",total:640000,paymentStatus:"PAID",shippingStatus:"DELIVERED",createdAt:"2025-10-21 12:12"}
            ],
            lowSkus:[
                {sku:"XM-AT-001-M",name:"√Åo thun A - M",onHand:5,reserved:3},
                {sku:"XM-AT-001-L",name:"√Åo thun A - L",onHand:4,reserved:2},
                {sku:"XM-QJ-002-32",name:"Qu·∫ßn jean B - 32",onHand:7,reserved:4},
                {sku:"XM-SN-003-42",name:"Sneaker C - 42",onHand:3,reserved:1}
            ],
            poReceiving:[
                {code:"PO-2401",supplier:"ABC Supply",status:"RECEIVING",receivedQty:120,totalQty:300},
                {code:"PO-2402",supplier:"XYZ Corp",status:"RECEIVING",receivedQty:40,totalQty:100},
                {code:"PO-2403",supplier:"Delta Ltd",status:"AWAITING",receivedQty:0,totalQty:80}
            ]
        };
        // =========================================================================
        // PH·∫¶N LOGIC L·ªåC V√Ä C√ÅC H√ÄM PH·ª§ TR·ª¢ GI·ªÆ NGUY√äN
        // =========================================================================
        function parseISO(s){ const [y,m,d]=s.split('-').map(Number); return new Date(Date.UTC(y,m-1,d)); }
        function formatDM(d){ const dd=String(d.getUTCDate()).padStart(2,'0'); const mm=String(d.getUTCMonth()+1).padStart(2,'0'); return `${dd}/${mm}`; }
        function formatMY(d){ const mm=String(d.getUTCMonth()+1).padStart(2,'0'); const yy=String(d.getUTCFullYear()).slice(-2); return `${mm}/${yy}`; }
        function weekKey(d){ // ISO week label
            const tmp=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()));
            const day=(tmp.getUTCDay()+6)%7; tmp.setUTCDate(tmp.getUTCDate()-day+3);
            const week1=new Date(Date.UTC(tmp.getUTCFullYear(),0,4));
            const wk = 1+Math.round(((tmp-week1)/86400000-3+((week1.getUTCDay()+6)%7))/7);
            return `W${String(wk).padStart(2,'0')}/${String(tmp.getUTCFullYear()).slice(-2)}`;
        }

        function aggregate(rangeFrom, rangeTo, gran){
            const from = parseISO(rangeFrom), to = parseISO(rangeTo);
            const inside = TS.filter(t=>{
                const d=parseISO(t.date);
                return d>=from && d<=to;
            });

            const map = new Map();
            const add = (k, a, v, c)=> {
                const o = map.get(k) || {articles:0, views:0, comments:0};
                o.articles += a; o.views += v; o.comments += c; map.set(k,o);
            };

            for(const t of inside){
                const d = parseISO(t.date);
                const key = gran==='D' ? formatDM(d) : gran==='W' ? weekKey(d) : formatMY(d);
                add(key, t.articles, t.views, t.comments);
            }

            const labels=[...map.keys()];
            const sorter = (a,b)=>{
                const pa=a.split(/[\/W]/).map(Number), pb=b.split(/[\/W]/).map(Number);
                if(a.startsWith('W')&&b.startsWith('W')) return pa[1]-pb[1] || pa[0]-pb[0];
                if(a.includes('/') && a.length===5) return +pa[1]- +pb[1] || +pa[0]- +pb[0];
                return +pa[1]- +pb[1] || +pa[0]- +pb[0];
            };
            labels.sort(sorter);
            const agg = labels.map(k=>map.get(k));
            return {
                labels,
                articles: agg.map(x=>x.articles),
                viewsK:   agg.map(x=>Math.round(x.views/1000)),
                comments: agg.map(x=>x.comments),
                totals: {
                    articles: agg.reduce((s,x)=>s+x.articles,0),
                    views:    agg.reduce((s,x)=>s+x.views,0),
                    comments: agg.reduce((s,x)=>s+x.comments,0)
                }
            };
        }

        // ===== Preset ng√†y =====
        const toISODate = d => new Date(d.getTime()-d.getTimezoneOffset()*60000).toISOString().slice(0,10);
        function setRange(preset){
            const to = new Date(); const from = new Date(to);
            if(preset==='today'){}
            else if(preset==='7d'){ from.setDate(to.getDate()-6); }
            else if(preset==='30d'){ from.setDate(to.getDate()-29); }
            else { from.setMonth(to.getMonth()-11); } // 12 th√°ng
            $('from').value = toISODate(from);
            $('to').value   = toISODate(to);
        }
        setRange('12m');
        document.querySelectorAll('[data-preset]').forEach(b=>b.addEventListener('click',()=>{ setRange(b.dataset.preset); render(); }));

        // ===== Charts init =====
        let chPerf, chCat, chSys, chUser, chCatalog, chRBAC, chLogs, chStock, chPO, chSeg, chLoy, chDisc;

        function make(el,type,labels,datasets,opts){ return new Chart(el,{type,data:{labels,datasets},options:opts||{}}); }

        // static charts (kh√¥ng ph·ª• thu·ªôc filter)
        function initStaticCharts(){
            // Chart.js Color Index: 0: Primary, 1: Danger, 2: Success, 3: Warning, 4: Info, 5: VIP, 6: Secondary, 7: Pink

            // C_CAT: D√πng c√°c m√†u trong palette cho c√°c danh m·ª•c
            chCat = make($('c_cat'),'bar', DASHBOARD.category.labels,[{label:'B√†i vi·∫øt',data:DASHBOARD.category.values,backgroundColor:COLOR_PALETTE}],{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}});

            // C_SYS: D√πng m√†u Primary, Danger, Secondary, Success
            chSys = make($('c_sys'),'pie', DASHBOARD.system.labels,[{data:DASHBOARD.system.values,backgroundColor:[chartColors.primary, chartColors.danger, chartColors.secondary, chartColors.success]}],{plugins:{legend:{position:'bottom'}}});

            // C_USER: D√πng m√†u Primary (C√≥ th·ªÉ d√πng m√†u kh√°c n·∫øu mu·ªën n·ªïi b·∫≠t h∆°n)
            chUser= make($('c_user'),'bar', DASHBOARD.userActivity.labels,[{label:'T√°c v·ª•',data:DASHBOARD.userActivity.values,backgroundColor:chartColors.primary}],{scales:{y:{beginAtZero:true}}});

            // C_CATALOG, C_RBAC, C_LOY: D√πng m√†u Primary
            chCatalog=make($('c_catalog'),'bar', DASHBOARD.catalog.labels,[{label:'S·ªë l∆∞·ª£ng',data:DASHBOARD.catalog.values,backgroundColor:chartColors.primary}],{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}});
            chRBAC=make($('c_rbac'),'bar', DASHBOARD.rbac.labels,[{label:'Quy·ªÅn/role',data:DASHBOARD.rbac.values,backgroundColor:chartColors.primary}],{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}});
            chLogs=make($('c_logs'),'doughnut', DASHBOARD.activity.labels,[{data:DASHBOARD.activity.values,backgroundColor:[chartColors.primary, chartColors.danger, chartColors.secondary, chartColors.success]}],{plugins:{legend:{position:'bottom'}}});
            chLoy  =make($('c_loy'),'bar', DASHBOARD.loyalty.labels,[{label:'ƒêi·ªÉm',data:DASHBOARD.loyalty.values,backgroundColor:chartColors.primary}],{scales:{y:{beginAtZero:true}}});

            // C_STOCK: C√≥ s·∫µn (Primary) vs Gi·ªØ ch·ªó (Danger)
            chStock=make($('c_stock'),'bar', DASHBOARD.stock.labels,[{label:'C√≥ s·∫µn',data:DASHBOARD.stock.onHand,backgroundColor:chartColors.primary},{label:'Gi·ªØ ch·ªó',data:DASHBOARD.stock.reserved,backgroundColor:chartColors.danger}],{scales:{y:{beginAtZero:true}}});

            // C_PO (ƒê∆°n mua): D√πng m√†u Semantic theo tr·∫°ng th√°i (Nh√°p/Warning, Ch·ªù/Info, ƒêang nh·∫≠n/Primary, H·∫°ch to√°n/Success, H·ªßy/Danger)
            // L∆∞u √Ω: V·ªã tr√≠ m√†u ph·∫£i kh·ªõp v·ªõi th·ª© t·ª± labels ƒë√£ ch·ªânh s·ª≠a trong DASHBOARD.poStatus
            chPO   =make($('c_po'),'pie', DASHBOARD.poStatus.labels,[{data:DASHBOARD.poStatus.values,backgroundColor:[chartColors.warning, chartColors.info, chartColors.primary, chartColors.success, chartColors.danger]}],{plugins:{legend:{position:'bottom'}}});

            // C_SEG (Ph√¢n kh√∫c KH): M·ªõi/Info, Quay l·∫°i/Success, VIP/VIP, Ng·ªß ƒë√¥ng/Muted (Secondary)
            chSeg  =make($('c_seg'),'pie', DASHBOARD.segments.labels,[{data:DASHBOARD.segments.values,backgroundColor:[chartColors.info, chartColors.success, chartColors.vip, chartColors.secondary]}],{plugins:{legend:{position:'bottom'}}});

            // C_DISC (Khuy·∫øn m√£i): S·ªë ƒë∆°n (Primary) vs Doanh thu (Danger - ƒë·ªÉ n·ªïi b·∫≠t)
            chDisc =make($('c_disc'),'bar', DASHBOARD.discountEffect.labels,[{label:'S·ªë ƒë∆°n',data:DASHBOARD.discountEffect.orders,backgroundColor:chartColors.primary,yAxisID:'y'},{label:'Doanh thu',data:DASHBOARD.discountEffect.revenue,backgroundColor:chartColors.danger,yAxisID:'y1'}],{scales:{y:{beginAtZero:true},y1:{beginAtZero:true,position:'right',ticks:{callback:v=>money(v)},grid:{drawOnChartArea:false}}},plugins:{legend:{position:'top'}}});
        }

        // render v·ªõi filter cho Perf + KPIs
        function render(){
            const from = $('from').value, to = $('to').value, gran = $('gran').value;
            const agg = aggregate(from,to,gran);

            // KPI logic... gi·ªØ nguy√™n

            const totalArticles = agg.totals.articles;
            const totalViews = agg.totals.views;
            const totalComments = agg.totals.comments;
            const days = Math.max(1, Math.round((parseISO(to)-parseISO(from))/86400000)+1);
            const prevFrom = new Date(parseISO(from)); prevFrom.setDate(prevFrom.getDate()-days);
            const prevTo = new Date(parseISO(from)); prevTo.setDate(prevTo.getDate()-1);
            const prev = aggregate(toISO(prevFrom), toISO(prevTo), gran);

            const pct = (cur,old)=> {
                if(!old || old===0) return 0;
                return ((cur-old)/old)*100;
            };

            const dArticles = pct(totalArticles, prev.totals.articles);
            const dViews = pct(totalViews, prev.totals.views);
            const dComments = pct(totalComments, prev.totals.comments);

            $('k_articles').textContent = totalArticles.toLocaleString('vi-VN');
            $('k_views').textContent    = totalViews.toLocaleString('vi-VN');
            $('k_comments').textContent = totalComments.toLocaleString('vi-VN');
            $('k_authors').textContent  = 24; // demo tƒ©nh
            $('k_media').textContent    = 3456;

            const setDelta = (el,v)=>{const n=Number(v||0); el.textContent=(n>=0?'+':'')+n.toFixed(1)+'%'; el.className='chip '+(n>0?'up':n<0?'down':'warn');};
            setDelta($('t_articles'), dArticles);
            setDelta($('t_views'), dViews);
            setDelta($('t_comments'), dComments);
            setDelta($('t_authors'), -2.1);
            setDelta($('t_media'), 15.7);

            // c·∫≠p nh·∫≠t chart Perf (D√πng Primary v√† Success)
            if(!chPerf){
                chPerf = make($('c_perf'),'line', agg.labels, [
                    // B√†i vi·∫øt: Primary
                    {label:'B√†i vi·∫øt xu·∫•t b·∫£n', data:agg.articles, tension:.35, fill:true, backgroundColor:'rgba(0,123,255,.1)', borderColor:chartColors.primary, pointBackgroundColor:chartColors.primary},
                    // L∆∞·ª£t xem: Success (Green)
                    {label:'L∆∞·ª£t xem (ngh√¨n)', data:agg.viewsK, tension:.35, fill:true, backgroundColor:'rgba(40,167,69,.1)', borderColor:chartColors.success, pointBackgroundColor:chartColors.success}
                ], {plugins:{legend:{position:'top'}}});
            }else{
                chPerf.data.labels = agg.labels;
                chPerf.data.datasets[0].data = agg.articles;
                chPerf.data.datasets[1].data = agg.viewsK;
                chPerf.update();
            }

            // render 3 b·∫£ng demo (gi·ªØ nguy√™n)
            $('t_orders').innerHTML = DASHBOARD.recentOrders.map(r=>`
        <tr class="border-t" style="border-color:var(--bd)">
          <td class="py-2 font-medium">${r.code}</td>
          <td class="py-2">${r.customer}</td>
          <td class="py-2">${money(r.total)}</td>
          <td class="py-2"><span class="px-2 py-0.5 rounded-full text-xs" style="background:var(--bd); color:var(--text)">${r.paymentStatus}</span></td>
          <td class="py-2"><span class="px-2 py-0.5 rounded-full text-xs" style="background:var(--bd); color:var(--text)">${r.shippingStatus}</span></td>
          <td class="py-2 muted">${r.createdAt}</td>
        </tr>`).join('');
            $('t_low').innerHTML = DASHBOARD.lowSkus.map(r=>`
        <tr class="border-t" style="border-color:var(--bd)">
          <td class="py-2 font-mono">${r.sku}</td>
          <td class="py-2">${r.name}</td>
          <td class="py-2">${r.onHand}</td>
          <td class="py-2">${r.reserved}</td>
        </tr>`).join('');
            $('t_po').innerHTML = DASHBOARD.poReceiving.map(r=>`
        <tr class="border-t" style="border-color:var(--bd)">
          <td class="py-2 font-mono">${r.code}</td>
          <td class="py-2">${r.supplier}</td>
          <td class="py-2"><span class="px-2 py-0.5 rounded-full text-xs" style="background:var(--bd); color:var(--text)">${r.status}</span></td>
          <td class="py-2">${r.receivedQty}/${r.totalQty}</td>
        </tr>`).join('');
        }

        // n√∫t √Åp d·ª•ng
        $('apply').addEventListener('click', render);

        // init all charts
        initStaticCharts();
        render();
    </script>
</section>
</body>
</html>
<!--<!doctype html>-->
<!--<html lang="vi"-->
<!--      xmlns:th="http://www.thymeleaf.org"-->
<!--      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
<!--      layout:decorate="~{layout/main}">-->
<!--<head>-->
<!--    <meta charset="utf-8"/>-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1"/>-->
<!--    <title>B·∫£ng ƒëi·ªÅu khi·ªÉn</title>-->

<!--    <script src="https://cdn.tailwindcss.com"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>-->

<!--    <style>-->
<!--        :root{-->
<!--            &#45;&#45;bg:#f8fafc; &#45;&#45;surface:#ffffff; &#45;&#45;text:#0f172a; &#45;&#45;muted:#64748b;-->
<!--            &#45;&#45;bd:#e2e8f0; &#45;&#45;ring:#94a3b8;-->

<!--            &#45;&#45;up-bg:#ecfdf5; &#45;&#45;up:#16a34a;-->
<!--            &#45;&#45;down-bg:#fef2f2; &#45;&#45;down:#dc2626;-->

<!--            &#45;&#45;ico-blue-bg:#e0f2fe; &#45;&#45;ico-blue:#0369a1;-->
<!--            &#45;&#45;ico-green-bg:#dcfce7; &#45;&#45;ico-green:#166534;-->
<!--            &#45;&#45;ico-purple-bg:#ede9fe; &#45;&#45;ico-purple:#5b21b6;-->
<!--            &#45;&#45;ico-orange-bg:#ffedd5; &#45;&#45;ico-orange:#9a3412;-->
<!--            &#45;&#45;ico-gray-bg:#e5e7eb; &#45;&#45;ico-gray:#334155;-->
<!--        }-->
<!--        /* chart m√†u b·∫°n ƒë√£ set */-->
<!--        .chart-colors {-->
<!--            &#45;&#45;chart-blue:#0ea5e9;-->
<!--            &#45;&#45;chart-red:#ef4444;-->
<!--            &#45;&#45;chart-orange:#f97316;-->
<!--            &#45;&#45;chart-yellow:#facc15;-->
<!--            &#45;&#45;chart-green:#22c55e;-->
<!--            &#45;&#45;chart-purple:#8b5cf6;-->
<!--            &#45;&#45;chart-pink:#ec4899;-->
<!--        }-->

<!--        body{background:var(&#45;&#45;bg); color:var(&#45;&#45;text)}-->
<!--        .wrap{max-width:1360px;margin:0 auto}-->
<!--        .card{background:var(&#45;&#45;surface);border:1px solid var(&#45;&#45;bd);border-radius:1rem;box-shadow:0 1px 3px rgba(15,23,42,.1)}-->
<!--        .muted{color:var(&#45;&#45;muted)}-->
<!--        .btn{padding:.45rem .7rem;border-radius:.55rem;border:1px solid var(&#45;&#45;bd);font-size:.875rem;background:var(&#45;&#45;surface);color:var(&#45;&#45;text)}-->
<!--        .btn:hover{filter:brightness(0.97)}-->
<!--        input[type="date"], select{background:var(&#45;&#45;surface);color:var(&#45;&#45;text);border:1px solid var(&#45;&#45;bd);outline:none}-->
<!--        input[type="date"]:focus, select:focus{box-shadow:0 0 0 3px var(&#45;&#45;ring)}-->

<!--        /* Filter g·ªçn */-->
<!--        .filter-grid{-->
<!--            display:grid; grid-template-columns:minmax(520px,1fr) auto auto;-->
<!--            align-items:center; column-gap:.5rem; row-gap:.35rem;-->
<!--        }-->
<!--        .field-inline{display:flex;align-items:center;gap:.4rem}-->
<!--        .field-wrap{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}-->
<!--        .filter-presets{grid-column:1/2;display:flex;justify-content:center;gap:.5rem;flex-wrap:wrap;margin-top:.2rem}-->
<!--        .ctl{font-size:.92rem;padding:.45rem .6rem;border-radius:.5rem}-->
<!--        .ctl-select{font-size:.92rem;padding:.45rem 2rem .45rem .6rem;border-radius:.5rem}-->

<!--        /* KPI */-->
<!--        .kpi{display:flex;gap:.75rem;align-items:center;padding:.85rem;background:var(&#45;&#45;surface);border:1px solid var(&#45;&#45;bd);border-radius:1rem;min-height:84px}-->
<!--        .ico{flex:0 0 42px;height:42px;display:grid;place-items:center;border-radius:.85rem}-->
<!--        .ico.blue{background:var(&#45;&#45;ico-blue-bg);color:var(&#45;&#45;ico-blue)}-->
<!--        .ico.green{background:var(&#45;&#45;ico-green-bg);color:var(&#45;&#45;ico-green)}-->
<!--        .ico.purple{background:var(&#45;&#45;ico-purple-bg);color:var(&#45;&#45;ico-purple)}-->
<!--        .ico.orange{background:var(&#45;&#45;ico-orange-bg);color:var(&#45;&#45;ico-orange)}-->
<!--        .ico.gray{background:var(&#45;&#45;ico-gray-bg);color:var(&#45;&#45;ico-gray)}-->
<!--        .kmain{min-width:0;flex:1}-->
<!--        .kval{font-size:1.45rem;line-height:1;font-weight:800;font-variant-numeric:tabular-nums}-->
<!--        .kcap{font-size:.84rem;color:var(&#45;&#45;muted);margin-top:.2rem;white-space:nowrap}-->
<!--        .kright{margin-left:.4rem;display:flex;align-items:center}-->
<!--        .chip{display:inline-flex;align-items:center;gap:.3rem;padding:.18rem .55rem;border-radius:999px;font-weight:700;font-size:.74rem;white-space:nowrap}-->
<!--        .chip.up{background:var(&#45;&#45;up-bg);color:var(&#45;&#45;up)}-->
<!--        .chip.down{background:var(&#45;&#45;down-bg);color:var(&#45;&#45;down)}-->
<!--        canvas.small-pie{max-height:200px!important}-->
<!--    </style>-->
<!--</head>-->

<!--<body class="chart-colors">-->
<!--<section layout:fragment="content">-->
<!--    <div class="wrap p-3 md:p-5 space-y-4">-->

<!--        &lt;!&ndash; Filter &ndash;&gt;-->
<!--        <div class="card p-3 md:p-4">-->
<!--            <h1 class="text-2xl md:text-3xl font-bold mb-2">B·∫£ng ƒëi·ªÅu khi·ªÉn</h1>-->

<!--            <div class="filter-grid">-->
<!--                <div class="field-wrap">-->
<!--                    <div class="field-inline">-->
<!--                        <span class="text-base">T·ª´</span>-->
<!--                        <input id="from" type="date" class="ctl"/>-->
<!--                        <span class="muted">üìÖ</span>-->
<!--                    </div>-->
<!--                    <span class="muted">‚Üí</span>-->
<!--                    <div class="field-inline">-->
<!--                        <span class="text-base">ƒê·∫øn</span>-->
<!--                        <input id="to" type="date" class="ctl"/>-->
<!--                        <span class="muted">üìÖ</span>-->
<!--                    </div>-->

<!--                    <div class="filter-presets">-->
<!--                        <button type="button" data-preset="today"  class="btn">H√¥m nay</button>-->
<!--                        <button type="button" data-preset="7d"     class="btn">7 ng√†y</button>-->
<!--                        <button type="button" data-preset="30d"    class="btn">30 ng√†y</button>-->
<!--                        <button type="button" data-preset="12m"    class="btn">12 th√°ng</button>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <select id="gran" class="ctl-select">-->
<!--                    <option value="D">Theo ng√†y</option>-->
<!--                    <option value="W">Theo tu·∫ßn</option>-->
<!--                    <option value="M">Theo th√°ng</option>-->
<!--                </select>-->

<!--                <button id="apply" type="button" class="px-4 py-2 rounded-lg text-sm font-medium"-->
<!--                        style="background:var(&#45;&#45;chart-blue);color:white">√Åp d·ª•ng</button>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; KPIs &ndash;&gt;-->
<!--        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-5 gap-3">-->
<!--            <div class="kpi">-->
<!--                <div class="ico blue"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M6 4a2 2 0 0 0-2 2v12.5A1.5 1.5 0 0 0 5.5 20H20v-2H6.5a.5.5 0 1 1 0-1H20V6a2 2 0 0 0-2-2H6z"/></svg></div>-->
<!--                <div class="kmain"><div class="kval" id="k_articles">0</div><div class="kcap truncate">T·ªïng b√†i vi·∫øt</div></div>-->
<!--                <div class="kright"><span id="t_articles" class="chip up">+0%</span></div>-->
<!--            </div>-->
<!--            <div class="kpi">-->
<!--                <div class="ico green"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M4 19h16v2H2V3h2v16zm3-6 3-3 3 2 4-5 3 3-1.4 1.4-1.6-1.6-4 5-3-2-3 3L7 13z"/></svg></div>-->
<!--                <div class="kmain"><div class="kval" id="k_views">0</div><div class="kcap truncate">L∆∞·ª£t xem trang</div></div>-->
<!--                <div class="kright"><span id="t_views" class="chip up">+0%</span></div>-->
<!--            </div>-->
<!--            <div class="kpi">-->
<!--                <div class="ico purple"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M4 4h16v10H6l-2 2V4zm2 4h12v2H6V8z"/></svg></div>-->
<!--                <div class="kmain"><div class="kval" id="k_comments">0</div><div class="kcap truncate">B√¨nh lu·∫≠n</div></div>-->
<!--                <div class="kright"><span id="t_comments" class="chip up">+0%</span></div>-->
<!--            </div>-->
<!--            <div class="kpi">-->
<!--                <div class="ico orange"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M16 11a4 4 0 1 0-8 0 4 4 0 0 0 8 0zm-9 7a6 6 0 1 1 12 0v2H7v-2z"/></svg></div>-->
<!--                <div class="kmain"><div class="kval" id="k_authors">0</div><div class="kcap truncate">T√°c gi·∫£</div></div>-->
<!--                <div class="kright"><span id="t_authors" class="chip down">-0%</span></div>-->
<!--            </div>-->
<!--            <div class="kpi">-->
<!--                <div class="ico gray"><svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor"><path d="M21 5H3v14h18V5zm-2 2v7l-4-4-3 3-2-2-5 5V7h14z"/></svg></div>-->
<!--                <div class="kmain"><div class="kval" id="k_media">0</div><div class="kcap truncate">T·ªáp media</div></div>-->
<!--                <div class="kright"><span id="t_media" class="chip up">+0%</span></div>-->
<!--            </div>-->
<!--        </section>-->

<!--        &lt;!&ndash; Charts &ndash;&gt;-->
<!--        <section class="grid grid-cols-1 xl:grid-cols-2 gap-5">-->
<!--            <div class="card p-4">-->
<!--                <div class="flex items-center justify-between mb-2">-->
<!--                    <h3 class="font-semibold">Hi·ªáu su·∫•t n·ªôi dung</h3>-->
<!--                    <span class="px-2 py-1 rounded-full text-xs" style="background:rgba(139,92,246,.1);color:#8b5cf6">Theo b·ªô l·ªçc</span>-->
<!--                </div>-->
<!--                <canvas id="c_perf"></canvas>-->
<!--            </div>-->
<!--            <div class="card p-4">-->
<!--                <div class="flex items-center justify-between mb-2">-->
<!--                    <h3 class="font-semibold">N·ªôi dung theo danh m·ª•c</h3>-->
<!--                    <span class="px-2 py-1 rounded-full text-xs" style="background:rgba(139,92,246,.1);color:#8b5cf6">NƒÉm nay</span>-->
<!--                </div>-->
<!--                <canvas id="c_cat"></canvas>-->
<!--            </div>-->
<!--        </section>-->

<!--        <section class="grid grid-cols-1 xl:grid-cols-2 gap-5">-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">L·ªãch s·ª≠ h·ªá th·ªëng</h3><a href="#" class="muted hover:underline text-sm">Xem t·∫•t c·∫£</a></div><canvas id="c_sys" class="small-pie"></canvas></div>-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Ho·∫°t ƒë·ªông ng∆∞·ªùi d√πng</h3><a href="#" class="muted hover:underline text-sm">Xem t·∫•t c·∫£</a></div><canvas id="c_user"></canvas></div>-->
<!--        </section>-->

<!--        <section class="grid grid-cols-1 xl:grid-cols-3 gap-5">-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">·∫¢nh ch·ª•p Catalog</h3><span class="muted text-xs">ng√†nh h√†ng / s·∫£n ph·∫©m / bi·∫øn th·ªÉ / media</span></div><canvas id="c_catalog"></canvas></div>-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">RBAC: Vai tr√≤ √ó Quy·ªÅn</h3><span class="muted text-xs">roles / permissions</span></div><canvas id="c_rbac"></canvas></div>-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Nh·∫≠t k√Ω (24h)</h3><span class="muted text-xs">CREATE / UPDATE / DELETE / STATUS</span></div><canvas id="c_logs" class="small-pie"></canvas></div>-->
<!--        </section>-->

<!--        <section class="grid grid-cols-1 xl:grid-cols-2 gap-5">-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">T·ªìn kho: c√≥ s·∫µn vs gi·ªØ ch·ªó</h3><span class="muted text-xs">SKU</span></div><canvas id="c_stock"></canvas></div>-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">ƒê∆°n mua theo tr·∫°ng th√°i</h3><span class="muted text-xs">PO</span></div><canvas id="c_po" class="small-pie"></canvas></div>-->
<!--        </section>-->

<!--        <section class="grid grid-cols-1 xl:grid-cols-3 gap-5">-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Ph√¢n b·ªë ph√¢n kh√∫c KH</h3><span class="muted text-xs">segments</span></div><canvas id="c_seg" class="small-pie"></canvas></div>-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">ƒêi·ªÉm t√≠ch l≈©y theo h·∫°ng</h3><span class="muted text-xs">loyalty</span></div><canvas id="c_loy"></canvas></div>-->
<!--            <div class="card p-4"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold">Hi·ªáu qu·∫£ khuy·∫øn m√£i</h3><span class="muted text-xs">discounts + usages</span></div><canvas id="c_disc"></canvas></div>-->
<!--        </section>-->

<!--        <section class="grid grid-cols-1 xl:grid-cols-3 gap-5">-->
<!--            <div class="card overflow-hidden">-->
<!--                <div class="p-4 border-b" style="border-color:var(&#45;&#45;bd)"><div class="flex items-center justify-between"><h3 class="font-semibold">ƒê∆°n g·∫ßn nh·∫•t</h3><a href="#" class="muted hover:underline text-sm">Xem t·∫•t c·∫£</a></div></div>-->
<!--                <div class="p-4 overflow-x-auto">-->
<!--                    <table class="w-full text-sm">-->
<!--                        <thead class="text-left muted"><tr><th class="py-2">M√£</th><th class="py-2">Kh√°ch</th><th class="py-2">T·ªïng</th><th class="py-2">TT</th><th class="py-2">Giao</th><th class="py-2">Ng√†y</th></tr></thead>-->
<!--                        <tbody id="t_orders"></tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card overflow-hidden">-->
<!--                <div class="p-4 border-b" style="border-color:var(&#45;&#45;bd)"><div class="flex items-center justify-between"><h3 class="font-semibold">SKU t·ªìn th·∫•p</h3><a href="#" class="muted hover:underline text-sm">T·ªõi kho</a></div></div>-->
<!--                <div class="p-4 overflow-x-auto">-->
<!--                    <table class="w-full text-sm">-->
<!--                        <thead class="text-left muted"><tr><th class="py-2">SKU</th><th class="py-2">T√™n</th><th class="py-2">C√≥ s·∫µn</th><th class="py-2">Gi·ªØ ch·ªó</th></tr></thead>-->
<!--                        <tbody id="t_low"></tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card overflow-hidden">-->
<!--                <div class="p-4 border-b" style="border-color:var(&#45;&#45;bd)"><div class="flex items-center justify-between"><h3 class="font-semibold">PO ƒëang nh·∫≠n</h3><a href="#" class="muted hover:underline text-sm">T·ªõi mua h√†ng</a></div></div>-->
<!--                <div class="p-4 overflow-x-auto">-->
<!--                    <table class="w-full text-sm">-->
<!--                        <thead class="text-left muted"><tr><th class="py-2">PO</th><th class="py-2">Nh√† cung c·∫•p</th><th class="py-2">Tr·∫°ng th√°i</th><th class="py-2">ƒê√£ nh·∫≠n/T·ªïng</th></tr></thead>-->
<!--                        <tbody id="t_po"></tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->
<!--        </section>-->
<!--    </div>-->

<!--    &lt;!&ndash; ===== Seed + Logic l·ªçc ===== &ndash;&gt;-->
<!--    <script>-->
<!--        const $ = id => document.getElementById(id);-->
<!--        const money = v => new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(+v||0);-->
<!--        const cssVar = n => getComputedStyle(document.body).getPropertyValue(n).trim();-->

<!--        // Chart defaults cho n·ªÅn s√°ng-->
<!--        Chart.defaults.color = getComputedStyle(document.documentElement).getPropertyValue('&#45;&#45;muted').trim();-->
<!--        Chart.defaults.borderColor = getComputedStyle(document.documentElement).getPropertyValue('&#45;&#45;bd').trim();-->

<!--        // ===== SEED TIME SERIES (18 th√°ng theo ng√†y) =====-->
<!--        function genDailySeed(startISO, months=18){-->
<!--            const out = [];-->
<!--            const start = new Date(startISO);-->
<!--            const end = new Date(start);-->
<!--            end.setMonth(end.getMonth()+months);-->
<!--            for(let d=new Date(start); d<end; d.setDate(d.getDate()+1)){-->
<!--                // base theo m√πa + noise nh·∫π ƒë·ªÉ nh√¨n t·ª± nhi√™n-->
<!--                const m = d.getMonth(); // 0..11-->
<!--                const season = (m===10||m===11)?1.25:(m===5||m===6)?0.9:1; // Q4 cao, h√® nh·∫π-->
<!--                const a = Math.max(6, Math.round(10*season + 4*Math.sin(d.getTime()/8.64e7/14) + rand(-2,2)));-->
<!--                const v = Math.max(600, Math.round(1200*season + 250*Math.sin(d.getTime()/8.64e7/10) + rand(-120,120))); // views per day-->
<!--                const c = Math.max(2, Math.round(a*0.35 + rand(-1,1)));-->
<!--                out.push({date: toISO(d), articles:a, views:v, comments:c});-->
<!--            }-->
<!--            return out;-->
<!--        }-->
<!--        const rand = (min,max)=>Math.random()*(max-min)+min;-->
<!--        const toISO = d => new Date(d.getTime()-d.getTimezoneOffset()*60000).toISOString().slice(0,10);-->

<!--        // seed t·ª´ 2024-01-01-->
<!--        const TS = genDailySeed('2024-01-01', 18);-->

<!--        // ===== STATIC SEED cho c√°c ph·∫ßn kh√°c (nh∆∞ b·∫°n ƒëang c√≥) =====-->
<!--        const DASHBOARD = {-->
<!--            category:{ labels:["C√¥ng ngh·ªá","Kinh doanh","S·ª©c kh·ªèe","Th·ªÉ thao","Gi·∫£i tr√≠","Ch√≠nh tr·ªã","Khoa h·ªçc"], values:[158,145,98,88,76,70,60] },-->
<!--            system:{ labels:["T·∫°o","S·ª≠a","X√≥a","Tr·∫°ng th√°i"], values:[35,42,7,16] },-->
<!--            userActivity:{ labels:["ƒêƒÉng nh·∫≠p","S·ª≠a","Xu·∫•t b·∫£n","B√¨nh lu·∫≠n","Th√≠ch"], values:[120,80,45,200,300] },-->
<!--            catalog:{ labels:["Ng√†nh h√†ng","S·∫£n ph·∫©m","Bi·∫øn th·ªÉ","Media"], values:[12,154,423,786] },-->
<!--            rbac:{ labels:["Admin","Bi√™n t·∫≠p","T√°c gi·∫£","Xem"], values:[12,34,24,58] },-->
<!--            activity:{ labels:["T·∫°o","S·ª≠a","X√≥a","Tr·∫°ng th√°i"], values:[80,140,20,35] },-->
<!--            stock:{ labels:["SKU-A","SKU-B","SKU-C","SKU-D","SKU-E","SKU-F"], onHand:[120,80,95,60,150,70], reserved:[20,10,15,5,30,12] },-->
<!--            poStatus:{ labels:["Nh√°p","Ch·ªù","ƒêang nh·∫≠n","ƒê√£ h·∫°ch to√°n","H·ªßy"], values:[4,8,6,3,1] },-->
<!--            segments:{ labels:["M·ªõi","Quay l·∫°i","VIP","Ng·ªß ƒë√¥ng"], values:[320,510,85,120] },-->
<!--            loyalty:{ labels:["ƒê·ªìng","B·∫°c","V√†ng","B·∫°ch kim"], values:[1200,430,140,35] },-->
<!--            discountEffect:{ labels:["SPRING10","FREESHIP","BLACKFRI","MEMBER5"], orders:[120,240,85,160], revenue:[24000000,36500000,17800000,22200000] },-->
<!--            recentOrders:[-->
<!--                {code:"#10021",customer:"Nguy·ªÖn A",total:1250000,paymentStatus:"PAID",shippingStatus:"SHIPPED",createdAt:"2025-10-21 09:14"},-->
<!--                {code:"#10022",customer:"Tr·∫ßn B",total:850000,paymentStatus:"PAID",shippingStatus:"PENDING",createdAt:"2025-10-21 10:05"},-->
<!--                {code:"#10023",customer:"L√™ C",total:2190000,paymentStatus:"PENDING",shippingStatus:"-",createdAt:"2025-10-21 11:44"},-->
<!--                {code:"#10024",customer:"Ph·∫°m D",total:640000,paymentStatus:"PAID",shippingStatus:"DELIVERED",createdAt:"2025-10-21 12:12"}-->
<!--            ],-->
<!--            lowSkus:[-->
<!--                {sku:"XM-AT-001-M",name:"√Åo thun A - M",onHand:5,reserved:3},-->
<!--                {sku:"XM-AT-001-L",name:"√Åo thun A - L",onHand:4,reserved:2},-->
<!--                {sku:"XM-QJ-002-32",name:"Qu·∫ßn jean B - 32",onHand:7,reserved:4},-->
<!--                {sku:"XM-SN-003-42",name:"Sneaker C - 42",onHand:3,reserved:1}-->
<!--            ],-->
<!--            poReceiving:[-->
<!--                {code:"PO-2401",supplier:"ABC Supply",status:"RECEIVING",receivedQty:120,totalQty:300},-->
<!--                {code:"PO-2402",supplier:"XYZ Corp",status:"RECEIVING",receivedQty:40,totalQty:100},-->
<!--                {code:"PO-2403",supplier:"Delta Ltd",status:"AWAITING",receivedQty:0,totalQty:80}-->
<!--            ]-->
<!--        };-->

<!--        // ===== Helpers l·ªçc & g·ªôp =====-->
<!--        function parseISO(s){ const [y,m,d]=s.split('-').map(Number); return new Date(Date.UTC(y,m-1,d)); }-->
<!--        function formatDM(d){ const dd=String(d.getUTCDate()).padStart(2,'0'); const mm=String(d.getUTCMonth()+1).padStart(2,'0'); return `${dd}/${mm}`; }-->
<!--        function formatMY(d){ const mm=String(d.getUTCMonth()+1).padStart(2,'0'); const yy=String(d.getUTCFullYear()).slice(-2); return `${mm}/${yy}`; }-->
<!--        function weekKey(d){ // ISO week label-->
<!--            const tmp=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()));-->
<!--            const day=(tmp.getUTCDay()+6)%7; tmp.setUTCDate(tmp.getUTCDate()-day+3);-->
<!--            const week1=new Date(Date.UTC(tmp.getUTCFullYear(),0,4));-->
<!--            const wk = 1+Math.round(((tmp-week1)/86400000-3+((week1.getUTCDay()+6)%7))/7);-->
<!--            return `W${String(wk).padStart(2,'0')}/${String(tmp.getUTCFullYear()).slice(-2)}`;-->
<!--        }-->

<!--        function aggregate(rangeFrom, rangeTo, gran){-->
<!--            const from = parseISO(rangeFrom), to = parseISO(rangeTo);-->
<!--            const inside = TS.filter(t=>{-->
<!--                const d=parseISO(t.date);-->
<!--                return d>=from && d<=to;-->
<!--            });-->

<!--            const map = new Map();-->
<!--            const add = (k, a, v, c)=> {-->
<!--                const o = map.get(k) || {articles:0, views:0, comments:0};-->
<!--                o.articles += a; o.views += v; o.comments += c; map.set(k,o);-->
<!--            };-->

<!--            for(const t of inside){-->
<!--                const d = parseISO(t.date);-->
<!--                const key = gran==='D' ? formatDM(d) : gran==='W' ? weekKey(d) : formatMY(d);-->
<!--                add(key, t.articles, t.views, t.comments);-->
<!--            }-->

<!--            const labels=[...map.keys()];-->
<!--            // gi·ªØ th·ª© t·ª± th·ªùi gian-->
<!--            const sorter = (a,b)=>{-->
<!--                const pa=a.split(/[\/W]/).map(Number), pb=b.split(/[\/W]/).map(Number);-->
<!--                // try parse month/yy ; day/month ; Wxx/yy-->
<!--                if(a.startsWith('W')&&b.startsWith('W')) return pa[1]-pb[1] || pa[0]-pb[0];-->
<!--                if(a.includes('/') && a.length===5) return +pa[1]- +pb[1] || +pa[0]- +pb[0]; // dd/mm-->
<!--                return +pa[1]- +pb[1] || +pa[0]- +pb[0];                                   // mm/yy-->
<!--            };-->
<!--            labels.sort(sorter);-->
<!--            const agg = labels.map(k=>map.get(k));-->
<!--            return {-->
<!--                labels,-->
<!--                articles: agg.map(x=>x.articles),-->
<!--                viewsK:   agg.map(x=>Math.round(x.views/1000)),-->
<!--                comments: agg.map(x=>x.comments),-->
<!--                totals: {-->
<!--                    articles: agg.reduce((s,x)=>s+x.articles,0),-->
<!--                    views:    agg.reduce((s,x)=>s+x.views,0),-->
<!--                    comments: agg.reduce((s,x)=>s+x.comments,0)-->
<!--                }-->
<!--            };-->
<!--        }-->

<!--        // ===== Preset ng√†y =====-->
<!--        const toISODate = d => new Date(d.getTime()-d.getTimezoneOffset()*60000).toISOString().slice(0,10);-->
<!--        function setRange(preset){-->
<!--            const to = new Date(); const from = new Date(to);-->
<!--            if(preset==='today'){}-->
<!--            else if(preset==='7d'){ from.setDate(to.getDate()-6); }-->
<!--            else if(preset==='30d'){ from.setDate(to.getDate()-29); }-->
<!--            else { from.setMonth(to.getMonth()-11); } // 12 th√°ng-->
<!--            $('from').value = toISODate(from);-->
<!--            $('to').value   = toISODate(to);-->
<!--        }-->
<!--        setRange('12m');-->
<!--        document.querySelectorAll('[data-preset]').forEach(b=>b.addEventListener('click',()=>{ setRange(b.dataset.preset); render(); }));-->

<!--        // ===== Charts init =====-->
<!--        const primary = cssVar('&#45;&#45;chart-blue'), green = cssVar('&#45;&#45;chart-green'), red = cssVar('&#45;&#45;chart-red'),-->
<!--            orange = cssVar('&#45;&#45;chart-orange'), yellow = cssVar('&#45;&#45;chart-yellow'), purple = cssVar('&#45;&#45;chart-purple'),-->
<!--            pink = cssVar('&#45;&#45;chart-pink');-->

<!--        let chPerf, chCat, chSys, chUser, chCatalog, chRBAC, chLogs, chStock, chPO, chSeg, chLoy, chDisc;-->

<!--        function make(el,type,labels,datasets,opts){ return new Chart(el,{type,data:{labels,datasets},options:opts||{}}); }-->

<!--        // static charts (kh√¥ng ph·ª• thu·ªôc filter)-->
<!--        function initStaticCharts(){-->
<!--            chCat = make($('c_cat'),'bar', DASHBOARD.category.labels,[{label:'B√†i vi·∫øt',data:DASHBOARD.category.values,backgroundColor:[primary,red,orange,yellow,green,purple,pink]}],{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}});-->
<!--            chSys = make($('c_sys'),'pie', DASHBOARD.system.labels,[{data:DASHBOARD.system.values,backgroundColor:[primary,red,orange,green]}],{plugins:{legend:{position:'bottom'}}});-->
<!--            chUser= make($('c_user'),'bar', DASHBOARD.userActivity.labels,[{label:'T√°c v·ª•',data:DASHBOARD.userActivity.values,backgroundColor:primary}],{scales:{y:{beginAtZero:true}}});-->
<!--            chCatalog=make($('c_catalog'),'bar', DASHBOARD.catalog.labels,[{label:'S·ªë l∆∞·ª£ng',data:DASHBOARD.catalog.values,backgroundColor:primary}],{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}});-->
<!--            chRBAC=make($('c_rbac'),'bar', DASHBOARD.rbac.labels,[{label:'Quy·ªÅn/role',data:DASHBOARD.rbac.values,backgroundColor:primary}],{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}});-->
<!--            chLogs=make($('c_logs'),'doughnut', DASHBOARD.activity.labels,[{data:DASHBOARD.activity.values,backgroundColor:[primary,red,orange,green]}],{plugins:{legend:{position:'bottom'}}});-->
<!--            chStock=make($('c_stock'),'bar', DASHBOARD.stock.labels,[{label:'C√≥ s·∫µn',data:DASHBOARD.stock.onHand,backgroundColor:primary},{label:'Gi·ªØ ch·ªó',data:DASHBOARD.stock.reserved,backgroundColor:red}],{scales:{y:{beginAtZero:true}}});-->
<!--            chPO   =make($('c_po'),'pie', DASHBOARD.poStatus.labels,[{data:DASHBOARD.poStatus.values,backgroundColor:[orange,primary,green,red,purple]}],{plugins:{legend:{position:'bottom'}}});-->
<!--            chSeg  =make($('c_seg'),'pie', DASHBOARD.segments.labels,[{data:DASHBOARD.segments.values,backgroundColor:[primary,red,orange,green]}],{plugins:{legend:{position:'bottom'}}});-->
<!--            chLoy  =make($('c_loy'),'bar', DASHBOARD.loyalty.labels,[{label:'ƒêi·ªÉm',data:DASHBOARD.loyalty.values,backgroundColor:primary}],{scales:{y:{beginAtZero:true}}});-->
<!--            chDisc =make($('c_disc'),'bar', DASHBOARD.discountEffect.labels,[{label:'S·ªë ƒë∆°n',data:DASHBOARD.discountEffect.orders,backgroundColor:primary,yAxisID:'y'},{label:'Doanh thu',data:DASHBOARD.discountEffect.revenue,backgroundColor:red,yAxisID:'y1'}],{scales:{y:{beginAtZero:true},y1:{beginAtZero:true,position:'right',ticks:{callback:v=>money(v)},grid:{drawOnChartArea:false}}},plugins:{legend:{position:'top'}}});-->
<!--        }-->

<!--        // render v·ªõi filter cho Perf + KPIs-->
<!--        function render(){-->
<!--            const from = $('from').value, to = $('to').value, gran = $('gran').value;-->
<!--            const agg = aggregate(from,to,gran);-->

<!--            // KPI trong kho·∫£ng ch·ªçn-->
<!--            const totalArticles = agg.totals.articles;-->
<!--            const totalViews = agg.totals.views;-->
<!--            const totalComments = agg.totals.comments;-->

<!--            // ƒë·ªÉ c√≥ % demo: so v·ªõi giai ƒëo·∫°n li·ªÅn k·ªÅ tr∆∞·ªõc ƒë√≥ c√πng ƒë·ªô d√†i-->
<!--            const days = Math.max(1, Math.round((parseISO(to)-parseISO(from))/86400000)+1);-->
<!--            const prevFrom = new Date(parseISO(from)); prevFrom.setDate(prevFrom.getDate()-days);-->
<!--            const prevTo = new Date(parseISO(from)); prevTo.setDate(prevTo.getDate()-1);-->
<!--            const prev = aggregate(toISO(prevFrom), toISO(prevTo), gran);-->

<!--            const pct = (cur,old)=> {-->
<!--                if(!old || old===0) return 0;-->
<!--                return ((cur-old)/old)*100;-->
<!--            };-->

<!--            const dArticles = pct(totalArticles, prev.totals.articles);-->
<!--            const dViews = pct(totalViews, prev.totals.views);-->
<!--            const dComments = pct(totalComments, prev.totals.comments);-->

<!--            $('k_articles').textContent = totalArticles.toLocaleString('vi-VN');-->
<!--            $('k_views').textContent    = totalViews.toLocaleString('vi-VN');-->
<!--            $('k_comments').textContent = totalComments.toLocaleString('vi-VN');-->
<!--            $('k_authors').textContent  = 24; // demo tƒ©nh-->
<!--            $('k_media').textContent    = 3456;-->

<!--            const setDelta = (el,v)=>{const n=Number(v||0); el.textContent=(n>=0?'+':'')+n.toFixed(1)+'%'; el.className='chip '+(n>=0?'up':'down');};-->
<!--            setDelta($('t_articles'), dArticles);-->
<!--            setDelta($('t_views'), dViews);-->
<!--            setDelta($('t_comments'), dComments);-->
<!--            setDelta($('t_authors'), -2.1);-->
<!--            setDelta($('t_media'), 15.7);-->

<!--            // c·∫≠p nh·∫≠t chart Perf-->
<!--            if(!chPerf){-->
<!--                chPerf = make($('c_perf'),'line', agg.labels, [-->
<!--                    {label:'B√†i vi·∫øt xu·∫•t b·∫£n', data:agg.articles, tension:.35, fill:true, backgroundColor:'rgba(14,165,233,.1)', borderColor:primary, pointBackgroundColor:primary},-->
<!--                    {label:'L∆∞·ª£t xem (ngh√¨n)', data:agg.viewsK, tension:.35, fill:true, backgroundColor:'rgba(34,197,94,.1)', borderColor:green, pointBackgroundColor:green}-->
<!--                ], {plugins:{legend:{position:'top'}}});-->
<!--            }else{-->
<!--                chPerf.data.labels = agg.labels;-->
<!--                chPerf.data.datasets[0].data = agg.articles;-->
<!--                chPerf.data.datasets[1].data = agg.viewsK;-->
<!--                chPerf.update();-->
<!--            }-->

<!--            // render 3 b·∫£ng demo (tƒ©nh)-->
<!--            $('t_orders').innerHTML = DASHBOARD.recentOrders.map(r=>`-->
<!--        <tr class="border-t" style="border-color:var(&#45;&#45;bd)">-->
<!--          <td class="py-2 font-medium">${r.code}</td>-->
<!--          <td class="py-2">${r.customer}</td>-->
<!--          <td class="py-2">${money(r.total)}</td>-->
<!--          <td class="py-2"><span class="px-2 py-0.5 rounded-full text-xs" style="background:var(&#45;&#45;bd); color:var(&#45;&#45;text)">${r.paymentStatus}</span></td>-->
<!--          <td class="py-2"><span class="px-2 py-0.5 rounded-full text-xs" style="background:var(&#45;&#45;bd); color:var(&#45;&#45;text)">${r.shippingStatus}</span></td>-->
<!--          <td class="py-2 muted">${r.createdAt}</td>-->
<!--        </tr>`).join('');-->
<!--            $('t_low').innerHTML = DASHBOARD.lowSkus.map(r=>`-->
<!--        <tr class="border-t" style="border-color:var(&#45;&#45;bd)">-->
<!--          <td class="py-2 font-mono">${r.sku}</td>-->
<!--          <td class="py-2">${r.name}</td>-->
<!--          <td class="py-2">${r.onHand}</td>-->
<!--          <td class="py-2">${r.reserved}</td>-->
<!--        </tr>`).join('');-->
<!--            $('t_po').innerHTML = DASHBOARD.poReceiving.map(r=>`-->
<!--        <tr class="border-t" style="border-color:var(&#45;&#45;bd)">-->
<!--          <td class="py-2 font-mono">${r.code}</td>-->
<!--          <td class="py-2">${r.supplier}</td>-->
<!--          <td class="py-2"><span class="px-2 py-0.5 rounded-full text-xs" style="background:var(&#45;&#45;bd); color:var(&#45;&#45;text)">${r.status}</span></td>-->
<!--          <td class="py-2">${r.receivedQty}/${r.totalQty}</td>-->
<!--        </tr>`).join('');-->
<!--        }-->

<!--        // n√∫t √Åp d·ª•ng-->
<!--        $('apply').addEventListener('click', render);-->

<!--        // init all charts-->
<!--        initStaticCharts();-->
<!--        render();-->
<!--    </script>-->
<!--</section>-->
<!--</body>-->
<!--</html>-->
